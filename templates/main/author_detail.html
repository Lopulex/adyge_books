<!-- templates/main/author_detail.html -->
{% extends 'base.html' %}
{% load static %}

{% block title %}{{ author.name }} - Издательство Адыгейского Университета{% endblock %}

{% block breadcrumbs %}
<!-- Хлебные крошки -->
<section class="breadcrumbs">
    <div class="container">
        <ul>
            <li><a href="{% url 'index' %}">Главная</a></li>
            <li><a href="{% url 'authors' %}">Авторы</a></li>
            <li>{{ author.name }}</li>
        </ul>
    </div>
</section>
{% endblock %}

{% block content %}
<!-- Детальная информация об авторе -->
<section class="section author-detail">
    <div class="container">
        <div class="author-detail-container">
            <div class="author-photo">
                <img src="{% if author.photo %}{{ author.photo.url }}{% else %}{% static 'images/author-placeholder.jpg' %}{% endif %}" alt="{{ author.name }}">
                {% if author.is_popular %}
                <span class="author-badge">Популярный автор</span>
                {% endif %}
            </div>
            
            <div class="author-info">
                <h1>{{ author.name }}</h1>
                
                {% if author.birth_date %}
                <div class="author-birthdate">
                    <i class="fas fa-birthday-cake"></i>
                    <span>Дата рождения: {{ author.birth_date|date:"d.m.Y" }}</span>
                </div>
                {% endif %}
                
                <div class="author-stats">
                    <div class="stat">
                        <i class="fas fa-book"></i>
                        <span>{{ author.book_set.count }} книг</span>
                    </div>
                
        
        <!-- Биография автора -->
        <div class="author-biography">
            <h2>Биография</h2>
            <div class="bio-content">
                {{ author.bio|linebreaks }}
            </div>
        </div>
        
        <!-- Книги автора -->
        <div class="author-books">
            <h2>Книги автора</h2>
            {% if books %}
            <div class="book-grid">
                {% for book in books %}
                <div class="book-card">
                    <div class="book-image">
                        <img src="{{ book.cover_image.url }}" alt="{{ book.title }}">
                        {% if book.is_bestseller %}
                        <span class="book-badge">Бестселлер</span>
                        {% elif book.is_new %}
                        <span class="book-badge new">Новинка</span>
                        {% endif %}
                    </div>
                    <div class="book-info">
                        <div class="book-title">{{ book.title }}</div>
                        <div class="book-actions">
                            <a href="{% url 'book_detail' book.slug %}" class="btn">Подробнее</a>
                            <button class="btn-cart"><i class="fas fa-shopping-cart"></i></button>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <div class="no-books">
                <p>У автора пока нет опубликованных книг.</p>
            </div>
            {% endif %}
        </div>
        
</section>
{% endblock %}